# Database Design（draft）

本篇将介绍数据库设计相关概念。主要分为两个部分：数据库概念设计和关系型数据库设计。它们分别对应的设计方法是 E-R 模型和标准化（Normalization）。



## 数据库设计和 E-R 模型

### 数据库设计过程

**设计过程**

- 需求分析阶段。与用户和领域专家交流，收集需求，充分地描述出预期的数据库用户需要的数据。这个阶段产出的是**用户需求的规范**。
- 概念设计阶段。选择一个数据模型，将用户需求转换为数据库概念模式。这个阶段主要是专注于描述数据和数据之间的关系。用专业的概念的数据模型去描述数据结构，主要使用 entity-relationship model 和 normalization 方式去设计。这个阶段一般产出的是**实体关系图**（E-R图）。完整的概念设计 schema 还包含**功能需求规范**。用户对数据的操作类型，如修改，查询和取出具体的数据，删除数据。
- 逻辑设计阶段。将抽象的数据模型转换为数据库的实现。将概念模型转换为数据库系统使用的模型，如将 entity-relationship model 转换为 relational model。
- 物理设计阶段。设计物理存储的细节。包括文件组织的形式和选择索引结构。

物理 schema 相对来说是很容易改变的，改变逻辑的 schema 是很难的，可能会影响到大量分散在应用程序中的查询和更新操作。因此，在构建应用程序之前，必须谨慎地和考虑周全地进行数据库设计。

**设计过程中的问题**



### E-R 模型

实体集（Entity Sets）

关系集（Relationship Sets）

属性（Attributes）

约束（Constraints）

去除实体集中冗余的属性

### E-R 图

基本结构

映射基数（Mapping Cardinality）

组合属性（Composite Attributes）

角色

非二元关系集（Nonbinary Relationship Sets）

弱实体集（Week Entity Sets）

### E-R 模型转换为关系模型

### E-R 模型设计中的问题

### 扩展的 E-R 特性

### 其它的数据建模方式

### 数据库设计的其它方面



## 关系型数据库设计和标准化

### 好的关系设计的特点

### 原子域和第一范式

### 使用函数依赖进行分解

### 函数依赖理论

### 分解算法

### 使用多值依赖的分解

### 其它范式

### 关系型数据库设计过程

### 时态数据建模



## 小结

E-R 模型专注于实体和它们之间的关系，而标准化专注于去除冗余数据，防止数据修改不完整，标准化有利于保证数据的一致性。完整性约束防止数据错误修改，与标准化类似，它也是为了保证数据的一致性。



范式总结

| 名称 | What |      |
| ---- | ---- | ---- |
| 1NF  |      |      |
| 2NF  |      |      |
| 3NF  |      |      |
| BCNF |      |      |
| 4NF  |      |      |



## References

[1] Database System Concept (6th) by Avi Silberschatz, Henry F. Korth, and S. Sudarshan