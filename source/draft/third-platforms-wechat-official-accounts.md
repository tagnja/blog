Title: WeChat Official Accounts 微信公众开发教程

**Content**

- 介绍微信公众平台
- 介绍微信公众号开发
  - 开发流程
  - 注意事项
- 微信公众号开发接入
- 自定义菜单
- 消息管理
- 微信网页开发
- 素材管理
- 图文消息留言管理
- 用户管理
- Appendixes
- References

## 介绍微信公众平台

微信公众平台是微信团队为微信公众号开发者提供的一个基础平台，平台通过为公众号开发者提供一系列的接口，让公众号能够更好的为微信用户提供服务。

微信公众号是微信 APP 中的一个功能，它是服务提供商或运营者为微信用户提供资讯和服务的接入点，微信用户通过订阅公众号和进入公众号，可以看到公众号提供的服务菜单和推送消息。

## 介绍微信公众号开发

### 如何开发一个公众号

- 开发者需要在微信公众平台注册一个公众号开发者账号，公众号分为：公众号分为服务号和订阅号。不同的公众号类型具备不同的公众平台的接口权限。
- 在公众平台配置自己的域名和服务器，开发者的服务器与微信公众平台进行对接。
- 开发者在微信公众平台提供的接口的基础上开发自己的服务，服务分为两种：公众号消息会话和公众号内网页。

### 公众号用户的识别

微信用户在公众号内的请求会携带一个 OpenID 的参数，来标识一个用户。每个用户对每个公众号都会产生一个唯一的 OpenID。如果需要在多个公众号之间做用户共通，需要将这些公众号和应用绑定到一个开发平台账号下，绑定后，一个用户对多个公众号依然有多个不同的 OpenID，但一个用户只有一个唯一的 UnionID。

### 公众号开发注意事项

- 微信公众平台开发是指微信公众号进行业务开发，为移动应用、PC端网站、公众号第三方平台的开发，请前往微信开发平台接入。
- 在申请到认证公众号之前，可以先通过测试号申请系统，快速申请一个接口测试号，立即开始接口测试开发。
- 在开发过程中，可以使用接口调试工具来在线调试某些接口。
- 每个接口都有每日接口调用频次限制，可以在公众平台官网-开发者中心处查看具体频次。
- 在开发出现问题时，可以通过接口调用的返回码，以及报警排查指引（在微信公众平台官网-开发者中心处可以设置接口报警），开发发现和解决问题。
- 公众平台以 access_token 为接口调用凭据，来调用接口，所有接口的调用需要先获取 access_token，access_token 在2小时内有效，过期需要重新获取，但1天内获取次数有限，开发者需自行存储。
- 公众平台接口调用仅支持80端口。



### 公众号服务介绍

公众号消息会话

1. 群发消息：公众号可以以一定频次（订阅号为每天1次，服务号为每月4次），向用户群发消息，包括文字消息、图文消息、图片、视频和语音等。
2. 被动回复消息：在用户给公众号发消息后，公众号可以自动回复一个消息。
3. 客服消息：在用户给公众号发消息后的48小时内，公众号可以给用户发送不限数量的消息，主要用于客服场景。
4. 模板消息：用于给用户发送服务通知，如刷卡提醒，服务预约成功通知等。公众号可以用特定内容模板主动向用户发送。

公众号内网页

许多复杂的业务场景，需要通过网页形式来提供服务，如商城，水电缴费等。公众号网页可以通过点击公众号发送的消息，或者点击公众号菜单进入网页。网页需要用到的公众平台的功能：网页授权获取用户基本信息，微信JS-SDK。

### 公众号的请求 （业务）处理交互图

## 微信公众号开发接入

微信公众号接入，是指在微信公众平台配置自己的服务器信息。

- 编写应用程序，服务器启动程序。
- 在微信公众平台的“开发-基本配置-服务器配置-修改配置”页面，填写服务器的信息。
- 点击“基本配置页面”下方的提交按钮，进行 token 验证。若当前页面出现“token验证失败”的提示，则说明配置的信息有误，或者服务器的代码有误；若token验证成功，则会自动返回基本配置的主页面。
- token 验证成功后，点击“启用”按钮，启用配置的服务器。

公众号接入成功后，可以进行微信公众平台 API 的调用测试。编写程序，调用程序，查看返回结构。

## Appendixes

[开发者规范](https://developers.weixin.qq.com/doc/offiaccount/Getting_Started/Developer_Standards.html)

[接口权限说明](https://developers.weixin.qq.com/doc/offiaccount/Getting_Started/Explanation_of_interface_privileges.html)

[全局返回码说明](https://developers.weixin.qq.com/doc/offiaccount/Getting_Started/Global_Return_Code.html)

## References

[公众号开发指南](https://developers.weixin.qq.com/doc/offiaccount/Getting_Started/Overview.html)